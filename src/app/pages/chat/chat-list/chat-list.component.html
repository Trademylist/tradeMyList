<app-left-navigation>
    <div class="seller-chater-wrapper">
        <ul class="nav nav-pills" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation" (click)="messageTypeChanged('all')">
                <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab"
                    aria-controls="pills-home" aria-selected="true">All</a>
            </li>
            <li class="nav-item" role="presentation" (click)="messageTypeChanged('selling')">
                <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
                    aria-controls="pills-profile" aria-selected="false">Selling</a>
            </li>
            <li class="nav-item" role="presentation" (click)="messageTypeChanged('buying')">
                <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab"
                    aria-controls="pills-contact" aria-selected="false">Buying</a>
            </li>
        </ul>
        <div [ngSwitch]="messageType">
            <div class="tab-content" id="pills-tabContent">
                <ng-container *ngSwitchCase="'all'">
                    <div *ngFor="let chat of chatDetails; index as i" [ngClass]="{'active': messageType === 'all'}" class="tab-pane fade show" id="pills-home" role="tabpanel"
                        aria-labelledby="pills-home-tab">

                        <div class="chat-list" *ngIf="checkAvailable(chat, 'all')" (click)="goChatDetails(chat)">
                            <div class="chat-image">
                                <img src="{{getProductImage(chat)}}">
                            </div>

                            <div class="namingDiv">
                                <h1 class="chat-name">{{getChatUser(chat)}}</h1>
                                <h3 class="product_type">{{getProductName(chat)}}</h3>
                                <p class="last-message" *ngIf="checkChatMessage(chat)" [ngClass]="{'unread-msg-bold': isUnreadMessage(chat)}"> {{getProductMessage(chat)}}
                                    <span class="unread-dots" *ngIf="isUnreadMessage(chat)">...</span>
                                </p>
                                <div *ngIf="checkChatImage(chat)">
                                    <ion-icon name="md-image"></ion-icon> <span class="chtimgtxt">Image</span>
                                  </div>
                                <label class="last-seen">{{getTime(chat.created)}}</label>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngSwitchCase="'selling'">
                    <div *ngFor="let chat of chatDetails" [ngClass]="{'active': messageType === 'selling'}" class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                        <ng-container *ngIf="checkBuyerSeller(chat)">
                        <div class="chat-list" *ngIf="checkAvailable(chat, 'buyer')" (click)="goChatDetails(chat)">
                            <div class="chat-image">
                                <img src="{{getProductImage(chat)}}">
                            </div>

                            <div class="namingDiv">
                                <h1 class="chat-name">{{getChatUser(chat)}}</h1>
                                <h3 class="product_type">{{getProductName(chat)}}</h3>
                                <p class="last-message" *ngIf="checkChatMessage(chat)" [ngClass]="{'unread-msg-bold': isUnreadMessage(chat)}"> {{getProductMessage(chat)}}
                                    <span class="unread-dots" *ngIf="isUnreadMessage(chat)">...</span>
                                </p>
                                <div *ngIf="checkChatImage(chat)">
                                    <ion-icon name="md-image"></ion-icon> <span class="chtimgtxt">Image</span>
                                  </div>
                                <label class="last-seen">{{getTime(chat.created)}}</label>
                            </div>
                        </div>
                        </ng-container>
                    </div>
                </ng-container>
                <ng-container *ngSwitchCase="'buying'">
                    <div  *ngFor="let chat of chatDetails" [ngClass]="{'active': messageType === 'buying'}" class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                        <ng-container *ngIf="checkBuyerSeller(chat)">
                            <div class="chat-list" *ngIf="checkAvailable(chat, 'seller')" (click)="goChatDetails(chat)">
                                <div class="chat-image">
                                    <img src="{{getProductImage(chat)}}">
                                </div>
    
                                <div class="namingDiv">
                                    <h1 class="chat-name">{{getChatUser(chat)}}</h1>
                                    <h3 class="product_type">{{getProductName(chat)}}</h3>
                                    <p class="last-message" *ngIf="checkChatMessage(chat)" [ngClass]="{'unread-msg-bold': isUnreadMessage(chat)}"> {{getProductMessage(chat)}}
                                        <span class="unread-dots" *ngIf="isUnreadMessage(chat)">...</span>
                                    </p>
                                    <div *ngIf="checkChatImage(chat)">
                                        <ion-icon name="md-image"></ion-icon> <span class="chtimgtxt">Image</span>
                                      </div>
                                    <label class="last-seen">{{getTime(chat.created)}}</label>
                                </div>
                            </div>
                            </ng-container>
                    </div>
                </ng-container>
            </div>
        </div>

        <div class="no-prod" *ngIf="chatDetails?.length<1">
            <img src="assets/images/selling.jpg">
            <h3>No chatted user</h3>
          </div>

          
    </div>
    

    
</app-left-navigation>
